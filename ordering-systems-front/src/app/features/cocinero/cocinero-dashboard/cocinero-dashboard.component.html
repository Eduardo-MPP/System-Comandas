<app-navbar></app-navbar>

<div class="dashboard-container">
    <div class="dashboard-header">
        <h1>
            <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" fill="none"
                stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path
                    d="M6 13.87A4 4 0 0 1 7.41 6a5.11 5.11 0 0 1 1.05-1.54 5 5 0 0 1 7.08 0A5.11 5.11 0 0 1 16.59 6 4 4 0 0 1 18 13.87V21H6Z">
                </path>
                <line x1="6" y1="17" x2="18" y2="17"></line>
            </svg>
            Pedidos de Cocina
        </h1>
        <p>Gestiona y prepara los pedidos entrantes</p>
    </div>

    <div class="loading-spinner" *ngIf="isLoading">
        <div class="spinner"></div>
        <p>Cargando pedidos...</p>
    </div>

    <div class="orders-grid" *ngIf="!isLoading && orders.length > 0">
        <div *ngFor="let order of orders" class="order-card" [ngClass]="getStatusClass(order.status!)">
            <div class="order-header">
                <div class="order-number">
                    <span class="label">Pedido #</span>
                    <span class="number">{{ order.id }}</span>
                </div>
                <div class="order-status" [ngClass]="getStatusClass(order.status!)">
                    {{ getStatusText(order.status!) }}
                </div>
            </div>

            <div class="order-info">
                <div class="info-item">
                    <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none"
                        stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <path d="M12 2v20M2 12h20"></path>
                        <circle cx="12" cy="12" r="9"></circle>
                    </svg>
                    {{ order.tableNumber }}
                </div>
                <div class="info-item">
                    <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none"
                        stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"></path>
                        <circle cx="9" cy="7" r="4"></circle>
                        <path d="M22 21v-2a4 4 0 0 0-3-3.87"></path>
                        <path d="M16 3.13a4 4 0 0 1 0 7.75"></path>
                    </svg>
                    {{ order.numberOfGuests }} comensales
                </div>
            </div>

            <div class="order-items">
                <h4>PRODUCTOS:</h4>
                <div *ngFor="let item of order.items" class="item-row">
                    <span class="item-qty">{{ item.quantity }}x</span>
                    <span class="item-name">{{ item.menuItem?.name }}</span>
                    <span class="item-notes" *ngIf="item.notes">{{ item.notes }}</span>
                </div>
            </div>

            <div class="order-actions">
                <button *ngIf="order.status === 'PENDIENTE'" (click)="startPreparation(order.id!)"
                    class="btn-action btn-start">
                    <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none"
                        stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <polygon points="5 3 19 12 5 21 5 3"></polygon>
                    </svg>
                    Iniciar Preparación
                </button>

                <button *ngIf="order.status === 'EN_PREPARACION'" (click)="markAsReady(order.id!)"
                    class="btn-action btn-ready">
                    <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none"
                        stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <polyline points="20 6 9 17 4 12"></polyline>
                    </svg>
                    Marcar como Listo
                </button>
            </div>
        </div>
    </div>

    <div class="empty-state" *ngIf="!isLoading && orders.length === 0">
        <svg xmlns="http://www.w3.org/2000/svg" width="80" height="80" viewBox="0 0 24 24" fill="none"
            stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path
                d="M6 13.87A4 4 0 0 1 7.41 6a5.11 5.11 0 0 1 1.05-1.54 5 5 0 0 1 7.08 0A5.11 5.11 0 0 1 16.59 6 4 4 0 0 1 18 13.87V21H6Z">
            </path>
            <line x1="6" y1="17" x2="18" y2="17"></line>
        </svg>
        <h3>No hay pedidos pendientes</h3>
        <p>Los nuevos pedidos aparecerán aquí automáticamente</p>
    </div>
</div>
